{"version":3,"file":"dashboard.js","sourceRoot":"","sources":["../../../src/components/dashboard.tsx"],"names":[],"mappings":";;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAC;AACpC,OAAO,MAAM,MAAM,KAAK,CAAC;AACzB,OAAO,MAAM,MAAM,mBAAmB,CAAC;AACvC,OAAO,aAAa,MAAM,2BAA2B,CAAC;AAGtD,MAAM,CAAC,OAAO,UAAU,SAAS;IACvB,IAAA,KAAoB,OAAO,EAAE,EAA3B,IAAI,UAAA,EAAE,OAAO,aAAc,CAAC;IAC9B,IAAA,KAA4B,MAAM,CAAW,eAAe,CAAC,EAArD,QAAQ,UAAA,EAAE,KAAK,WAAsC,CAAC;IAC5D,IAAM,MAAM,GAAK,MAAM,CAAS,aAAa,CAAC,KAAlC,CAAmC;IAEvD,IAAI,CAAC,QAAQ,IAAI,OAAO,IAAI,CAAC,IAAI,EAAE;QAC/B,OAAO,IAAI,CAAC;KACf;IAED,IAAI,KAAK,EAAE;QACP,OAAO,mFAA+D,CAAC;KAC1E;IAED,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;QAClB,OAAO,KAAC,QAAQ,KAAG,CAAC;KACvB;IAEK,IAAA,KAAqB,QAAQ,CAAC,cAAc,EAA1C,KAAK,WAAA,EAAE,OAAO,aAA4B,CAAC;IACnD,IAAM,UAAU,GACZ,QAAQ,CAAC,MAAM,KAAK,YAAY,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,OAAO,KAAK,CAAC,CAAC,CAAC;IAEvE,OAAO,CACH,8BACI,KAAC,aAAa,KAAG,EAEhB,UAAU,CAAC,CAAC,CAAC,CACV,kFAC2D,GAAG,EAC1D,KAAC,MAAM,aAAC,IAAI,EAAE,8BAAuB,IAAI,CAAC,QAAQ,CAAE,kCAE3C,SAET,CACP,CAAC,CAAC,CAAC,CACA,+DACwC,GAAG,EACvC,6BAAS,KAAK,cAAgB,UAAK,GAAG,EACtC,6BAAS,OAAO,gBAAkB,SAClC,CACP,EAEA,MAAM,IAAI,KAAC,aAAa,IAAC,MAAM,EAAE,MAAM,GAAI,IACtC,CACb,CAAC;AACN,CAAC;AAED;;GAEG;AACH,SAAS,aAAa,CAAC,EAA8B;QAA5B,MAAM,YAAA;IAC3B,OAAO,CACH,oEAC6C,GAAG,EAC5C,KAAC,MAAM,aAAC,IAAI,EAAE,MAAM,CAAC,WAAW,gBAAG,MAAM,CAAC,IAAI,IAAU,uCACjC,KAAC,MAAM,aAAC,IAAI,EAAE,MAAM,CAAC,QAAQ,0BAAe,SACnE,CACP,CAAC;AACN,CAAC;AAED,SAAS,QAAQ;IACb,OAAO,CACH,8BACI,KAAC,aAAa,KAAG,EAEjB,qFAAiE,IAC3D,CACb,CAAC;AACN,CAAC","sourcesContent":["import { useUser } from 'lib/hooks';\nimport useSWR from 'swr';\nimport Anchor from 'components/anchor';\nimport ChangeSetting from 'components/change-setting';\nimport { Header, Schedule } from 'src/types';\n\nexport default function Dashboard() {\n    const { user, loading } = useUser();\n    const { data: schedule, error } = useSWR<Schedule>('/api/schedule');\n    const { data: header } = useSWR<Header>('/api/header');\n\n    if (!schedule || loading || !user) {\n        return null;\n    }\n\n    if (error) {\n        return <p>something went wrong loading data. reach out to @lukebro</p>;\n    }\n\n    if (!schedule.active) {\n        return <Disabled />;\n    }\n\n    const { hours, minutes } = schedule.timeTillChange;\n    const processing =\n        schedule.status === 'processing' || (hours === 0 && minutes === 0);\n\n    return (\n        <section>\n            <ChangeSetting />\n\n            {processing ? (\n                <p>\n                    Your header is processing right now, you should see it{' '}\n                    <Anchor href={`https://twitter.com/${user.username}`}>\n                        updated soon\n                    </Anchor>\n                    .\n                </p>\n            ) : (\n                <p>\n                    Your next header will be updated in{' '}\n                    <strong>{hours} hours</strong> and{' '}\n                    <strong>{minutes} minutes</strong>.\n                </p>\n            )}\n\n            {header && <CurrentHeader header={header} />}\n        </section>\n    );\n}\n\n/**\n * Need to give credit to author, Unsplash TOS.\n */\nfunction CurrentHeader({ header }: { header: Header }) {\n    return (\n        <p>\n            Your current header image is authored by{' '}\n            <Anchor href={header.profileLink}>{header.name}</Anchor>. You can\n            check out the original <Anchor href={header.original}>here</Anchor>.\n        </p>\n    );\n}\n\nfunction Disabled() {\n    return (\n        <section>\n            <ChangeSetting />\n\n            <p>Come back here anytime to re-enable your new header daily.</p>\n        </section>\n    );\n}\n"]}